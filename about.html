<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FragMC</title>
  <link rel="stylesheet" href="assets/css/main.css">
  <style>
    :root {
      --bg: #0e0e11;
      --card: #17171c;
      --muted: #9aa0a6;
      --text: #e8eaed;
      --accent: #5865f2;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    header {
      padding: 18px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #222;
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    nav {
      display: flex;
      gap: 18px;
      font-size: 0.95rem;
    }

    nav a {
      color: var(--muted);
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s ease;
    }

    nav a:hover {
      color: var(--text);
    }

    nav .active {
      font-weight: 600;
      color: var(--text);
    }

    .hero {
      padding: 80px 24px 60px;
      text-align: center;
      background: linear-gradient(180deg, rgba(88, 101, 242, 0.1) 0%, transparent 100%);
    }

    .hero h1 {
      font-size: 3.5rem;
      margin: 0 0 20px;
      background: linear-gradient(135deg, var(--accent), #7289da);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      font-size: 1.3rem;
      color: var(--muted);
      max-width: 700px;
      margin: 0 auto;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 40px 24px;
    }

    .button-group {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 30px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: var(--accent);
      color: white;
      padding: 16px 32px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      cursor: pointer;
      border: none;
      font-size: 1.1rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(88, 101, 242, 0.4);
    }

    .expandable-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.4s ease;
      opacity: 0;
    }

    .expandable-content.open {
      max-height: 3000px;
      opacity: 1;
      margin-bottom: 40px;
    }

    .section h2 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: var(--text);
    }

    .section h3 {
      font-size: 1.4rem;
      margin-top: 30px;
      margin-bottom: 15px;
      color: var(--text);
    }

    .info-card {
      background: var(--card);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 20px;
      margin-left: 100px;
      margin-right: 100px;
      border: 1px solid #222;
    }

    .info-card p {
      margin: 0 0 12px;
      color: var(--muted);
    }

    .info-card ul, .info-card ol {
      margin: 0;
      padding-left: 20px;
      color: var(--muted);
    }

    .info-card li {
      margin-bottom: 8px;
    }

    .server-info {
      background: #0b0b0e;
      border-radius: 12px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      margin: 16px 0;
      border: 1px solid #222;
    }

    .server-info div {
      margin: 8px 0;
    }

    .server-info strong {
      color: var(--accent);
    }

    .warning {
      background: rgba(255, 193, 7, 0.1);
      border-left: 4px solid #ffc107;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
      color: var(--text);
    }

    .note {
      background: rgba(88, 101, 242, 0.1);
      border-left: 4px solid var(--accent);
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
      color: var(--text);
    }

    code {
      background: #0b0b0e;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: #7dd3fc;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:24px;">
    <strong style="font-size:1.3rem;">FragMC</strong>
  </div>
  <nav style="display:flex;gap:18px;font-size:0.95rem;">
    <a href="/" style="color:var(--muted);cursor:pointer;text-decoration:none;">Home</a>
    <a href="maps" style="color:var(--muted);cursor:pointer;text-decoration:none;">Maps</a>
    <span style="font-weight:600;">About</span>
  </nav>
  <div class="account-menu">
    <button class="account-btn" onclick="toggleAccountDropdown()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
      Account
    </button>
    <div class="account-dropdown" id="account-dropdown">
      <div id="account-main-menu" style="display: flex; flex-direction: column; gap: 4px;">
        <button id="custom-login-btn" class="authmark-btn" onclick="openLoginModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 10px; opacity: 0.7;"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M15 12H3"/></svg>
          Login
        </button>
        <button id="custom-logout-btn" class="authmark-btn" onclick="handleLogout()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 10px; opacity: 0.7;"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/></svg>
          Logout
        </button>
      </div>
      <button id="custom-login-btn" class="authmark-btn" onclick="goToPage('maps')">
          <svg width="18" height="18" fill="#ffffff" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" style="margin-right: 10px; opacity: 0.7;"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" /></svg>
          Player control
      </button>

      <!-- Hidden logout control for programmatic access -->
      <div id="authmark-ctrl_logout" style="display:none;"></div>
    </div>
  </div>
</header>

<div class="hero">
  <h1>About FragMC</h1>
  <p>This page shows all you need to know about FragMC from what it is to who made it.</p>
</div>

<div class="info-card">
    <h2>Credits</h2>
    <p>Creator: Super777 (ZonkedLocket533)</p>
    <p>Developers: Stuf_y (rsGamEr74020), Rocky (plandrocky)</p>
    <p>Map Designers: Super777 (ZonkedLocket533), Ninja (Ninjanyanicorn3), Rocky (plandrocky), Stuf_y (rsGamEr74020) & You, The Community &lt;3</p>
    <p>Web Designer: <a style="color:var(--text);cursor:pointer;" href="https://github.com/StuffzEZ?ref=fragmc.github.io">StuffzEZ (Stuf_y)</a></p>
    <p>Additional Mentions: <a style="color:var(--text);cursor:pointer;" href="https://enginehub.org/worldedit?ref=fragmc.github.io">Worldedit</a>, <a style="color:var(--text);cursor:pointer;" href="https://geysermc.org?ref=fragmc.github.io">The GeyserMC project</a>, <a style="color:var(--text);cursor:pointer;" href="https://modrinth.com/mod/fancymenu?ref=fragmc.github.io">FancyMenu</a></p>
</div>

<div class="modal" id="login-modal" onclick="closeLoginModalOnBackdrop(event)">
  <div class="login-modal-content" onclick="event.stopPropagation()">
    <button class="close" onclick="closeLoginModal()">×</button>
    <h2>Sign In</h2>
    <p>Select a provider to continue</p>
    
    <div style="display:flex; flex-direction:column; gap:12px;">
      <div id="authmark-ctrl_login_microsoft"></div>
      <div id="authmark-ctrl_login_discord"></div>
      <div id="authmark-ctrl_login_google"></div>
      <div id="authmark-ctrl_login_github"></div>
    </div>
  </div>
</div>

<div class="modal" id="logout-modal" onclick="closeLogoutModalOnBackdrop(event)">
  <div class="login-modal-content" onclick="event.stopPropagation()">
    <button class="close" onclick="closeLogoutModal()">×</button>
    <h2>Log Out</h2>
    <p>Are you sure you want to log out?</p>
    
    <div class="logout-actions">
      <button class="logout-btn cancel" onclick="closeLogoutModal()">Cancel</button>
      <button class="logout-btn confirm" onclick="confirmLogout()">Yes</button>
    </div>
  </div>
</div>

<script src="https://authmark.github.io/Handler/latest.js" defer></script>
<script>
  // AuthMark Script Initialization
  window.addEventListener('DOMContentLoaded', () => {
    AuthMark.init(); // auto-detects divs and handles ACCID cookie
    setTimeout(checkLoginState, 500); 
  });

function toggleAccountDropdown() {
  const dropdown = document.getElementById('account-dropdown');
  const isOpen = dropdown.classList.toggle('open');
  
  if (isOpen) {
    checkLoginState();
  }
}

function checkLoginState() {
  // Check for ACCID cookie
  let isLoggedIn = document.cookie.split('; ').some(row => row.startsWith('ACCID='));
  
  // Fallback: Check if AuthMark has injected the logout button (DOM check)
  if (!isLoggedIn) {
    const logoutContainer = document.getElementById('authmark-ctrl_logout');
    if (logoutContainer && logoutContainer.children.length > 0) {
      isLoggedIn = true;
    }
  }
  
  const loginBtn = document.getElementById('custom-login-btn');
  const logoutBtn = document.getElementById('custom-logout-btn');
  
  if (isLoggedIn) {
    loginBtn.disabled = true;
    loginBtn.title = "You are already logged in";
    logoutBtn.disabled = false;
    logoutBtn.title = "";
  } else {
    loginBtn.disabled = false;
    loginBtn.title = "";
    logoutBtn.disabled = true;
    logoutBtn.title = "You are not logged in";
  }
}

function openLoginModal() {
  document.getElementById('account-dropdown').classList.remove('open');
  document.getElementById('login-modal').classList.add('open');
}

function closeLoginModal() {
  document.getElementById('login-modal').classList.remove('open');
}

function closeLoginModalOnBackdrop(event) {
  if (event.target.id === 'login-modal') {
    closeLoginModal();
  }
}

function handleLogout() {
  document.getElementById('account-dropdown').classList.remove('open');
  document.getElementById('logout-modal').classList.add('open');
}

function closeLogoutModal() {
  document.getElementById('logout-modal').classList.remove('open');
}

function closeLogoutModalOnBackdrop(event) {
  if (event.target.id === 'logout-modal') {
    closeLogoutModal();
  }
}

function confirmLogout() {
  const authmarkLogoutContainer = document.getElementById('authmark-ctrl_logout');
  let logoutBtn = authmarkLogoutContainer.querySelector('button, a, div[onclick], input[type="button"]');
  
  if (!logoutBtn && authmarkLogoutContainer.firstElementChild) {
    logoutBtn = authmarkLogoutContainer.firstElementChild;
  }
  
  if (logoutBtn) {
    logoutBtn.click();
    closeLogoutModal();
    // Refresh page after logout to update UI
    setTimeout(() => {
        location.reload();
    }, 1000);
  } else {
    console.error("Authmark logout button not found");
    alert("Could not trigger logout. Please try again.");
    closeLogoutModal();
  }
}

// Close dropdown when clicking outside
window.addEventListener('click', (e) => {
  const dropdown = document.getElementById('account-dropdown');
  const btn = document.querySelector('.account-btn');
  if (dropdown && dropdown.classList.contains('open') && !dropdown.contains(e.target) && !btn.contains(e.target)) {
    dropdown.classList.remove('open');
  }
});
</script>
</body>
</html>